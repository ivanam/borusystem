{% extends "base_cajero.html" %}
{% block titulo %}Boru - Cajero{% endblock %}
{% block contenido %}
<div class="izquierda">

    <button class="btn btn-inverse menu_cajero">
        Comandas Abiertas
        <div class="comanda_nueva">2</div>
    </button>
    <button class="btn btn-inverse menu_cajero">
        Comandas Cerradas
    </button>
    <button class="btn btn-inverse menu_cajero">
        Pretickets
    </button>

</div>
<div class="derecha">
    <div class="contenedor_secundario_cajero">

        <div id="con_menu_mozo" class="cont_redondeado contenedor_principal_cajero">
            <div class="label label-inverse titulo_menu">Comandas Abiertas</div>
            <br>

            <div class="salto_linea"></div>
                <div id="mesas_libres" class="bloque_comandas">

                    <!-- ACA inicio codigo //-->
                    <div class="salto_linea"></div>

                    {% for c in comandas %}
                    <!--inicio comanda abierta item //-->
                        <div class="contenedor_comanda_item">
                            <div class="comanda_numero">Comanda Nº {{ c.id }}</div>
                            <div class="contenedor_comanda_data">
                                <div class="comanda_fecha">Fecha: {{ c.fecha }} {{ c.hora }}</div>
                                <div class="comanda_mesas">
                                    Mesas:
                                    {% for m in c.mesas.all %}
                                    <span class="badge badge-warning">{{ m.id }}</span>
                                    {% endfor %}
                                </div>
                                <div class="linea"></div>
                                <div class="comanda_btn">
                                    <input type="button" class="btn btn-small" value="Cerrar Comanda"
                                           onClick="confirm('Usted Desea Cerrar la Comanda Nº {{c.id}}?');">
                                    <input type="button" class="btn btn-small" value=" Detalle Comanda" onClick="mostrarDetalleComanda({{c.id}});">
                                </div>
                            </div>
                        </div>
                    <!--fin comanda abierta item //-->
                    {% endfor %}
                    <!-- ACA fin codigo //-->
                </div><!-- fin bloke de mesas//-->
        </div><!-- fin contenedor principal//-->
    </div><!-- fin de contenedor secundario //-->
</div>
{% endblock %}

{% block script %}
<script>
function mostrarDetalleComanda(id_comanda){

    $.ajax({
        type: "GET",
        url: "{% url 'detalle_comanda_ajax' %}",
        data: "id_comanda="+id_comanda,
        success: function(datos){


            $('.modal-titulo').html("Comanda Nº "+id_comanda);
            $('.modal-body').html(datos);
            $('#myModal').modal("show")
          }
    });
}


function mostrarDetallePedido(){

    $('.modal-titulo').html("Pedido Nº 24578412");
    $('.modal-body').html($("#15236548").html());
  $('#myModal').modal("show")

}

$(document).ready(function(){

  //leo lo que guarde
  $("#nombre_usuario").html($.cookie('usuario'));
  
  //le doy funcionalidad al boton cerrar sesion
  $("#cerrar_sescion_actual").click(function(){
    delCookies(); 
    document.location.href = 'index.html';
  });
  
  $('.dropdown-toggle').dropdownHover(options);
});

</script>
{% endblock %}